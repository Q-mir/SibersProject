@page
@model SibersProject.Pages.Project.UpdateProjectModel
@{
    Layout = "_Layout";
    ViewData["Title"] = "Обновление проекта";
}

<form method="post">
    <div class="form-group">
        <label asp-for="ProjectInput.ProjectName"></label>
        <input asp-for="ProjectInput.ProjectName" class="form-control" />
    </div>

    <div class="form-group">
        <label asp-for="ProjectInput.ProjectManagerId"></label>
        <select id="leaderDropdown" asp-for="ProjectInput.ProjectManagerId" class="form-control">
            <option value="">Выберите руководителя</option>
        </select>
    </div>

    <div class="form-group">
        <label asp-for="ProjectInput.ExecutorCompany"></label>
        <select id="executorDropdown" asp-for="ProjectInput.ExecutorCompany" class="form-control">
            <option value="">Выберите исполнителя</option>
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Сохранить</button>
</form>

@section Scripts {
    <script>
        $(document).ready(function() {
            $('#leaderDropdown, #executorDropdown').select2({
                ajax: {
                    url: '/Employee/SearchEmployees',
                    dataType: 'json',
                    delay: 250,
                    data: function(params) {
                        return {
                            search: params.term
                        };
                    },
                    processResults: function(data) {
                        return {
                            results: data
                        };
                    },
                    cache: true
                },
                minimumInputLength: 2
            });
        });
    </script>
}